<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-us" lang="en-us">
<head>
  <link href="//gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.87.0" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Catfish &middot; Tiger&#39;s home</title>

  
  <link type="text/css" rel="stylesheet" href="/css/print.css" media="print">
  <link type="text/css" rel="stylesheet" href="/css/poole.css">
  <link type="text/css" rel="stylesheet" href="/css/syntax.css">
  <link type="text/css" rel="stylesheet" href="/css/hyde.css">
  <link type="text/css" rel="stylesheet" href="/css/custom.css">
    <link type="text/css" rel="stylesheet" href="/css/fonts.css">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/catfish.png">
  <link rel="shortcut icon" href="/favicon.ico">

  
  <link href="/index.xml" rel="alternate" type="application/rss+xml" title="Catfish" />
  


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">





    
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        
    
    <script type="text/javascript">
        
        hljs.initHighlightingOnLoad();
    </script>
    



</head>

  <body class="theme-base-0d ">
  <aside class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href="/"><h1>Catfish</h1></a>
      <p class="lead">
       R is the brush, math is the pigment, nature is the scenery, and science is the picture. 
      </p>
    </div>

    <nav class="sidebar-nav">
      
      
        <a class="sidebar-nav-item active" href="/">Home</a>
        <a class="sidebar-nav-item " href="/about/"> About </a><a class="sidebar-nav-item " href="/post/"> Archives </a><a class="sidebar-nav-item " href="/categories/"> Categories </a><a class="sidebar-nav-item " href="/resume/"> Resume </a><a class="sidebar-nav-item " href="https://github.com/ctfysh"> GitHub </a>
    </nav>

    
  </div>
</aside>

    <main class="content container">
    <div class="posts">

<article class="post">
  <h1 class="post-title">
    <a href="/post/2016/10/07/taylor-series-for-uncertainty/">基于泰勒展开的不确定性传递</a>
  </h1>
  <time datetime="2016-10-07T00:00:00Z" class="post-date">2016年10月7日</time>
  


<div id="section" class="section level1">
<h1>1 两个输入变量</h1>
<p>假设随机变量<span class="math inline">\(Z\)</span>是随机变量<span class="math inline">\(X\)</span>和随机变量<span class="math inline">\(Y\)</span>的函数，函数关系如下</p>
<p><span class="math display">\[Z=f(X,Y)\]</span></p>
<p>其中<span class="math inline">\(X\)</span>和<span class="math inline">\(Y\)</span>的均值分别为<span class="math inline">\(\overline{X}\)</span>和<span class="math inline">\(\overline{Y}\)</span>，方差分别为<span class="math inline">\(D_{X}\)</span><a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>和<span class="math inline">\(D_{Y}\)</span>，协方差为<span class="math inline">\(D_{XY}\)</span>。对<span class="math inline">\(Z\)</span>进行关于<span class="math inline">\(\overline{X}\)</span>和<span class="math inline">\(\overline{Y}\)</span>泰勒展开可以得到</p>
<p><span class="math display">\[Z=f(\overline{X},\overline{Y})+f_{X}^{\prime}(\overline{X},\overline{Y})(X-\overline{X})+f_{Y}^{\prime}(\overline{X},\overline{Y})(Y-\overline{Y})+o(X,Y)\]</span></p>
<p>如果忽略高阶项<span class="math inline">\(o(X,Y)\)</span>，那么根据随机变量求和的期望和方差计算公式</p>
<p><span class="math display">\[\mathbb{E}(X+Y)=\mathbb{E}(X)+\mathbb{E}(Y)\]</span></p>
<p>和</p>
<p><span class="math display">\[\text{var}(X+Y)=\text{var}(X)+\text{var}(Y)+2\text{cov}(X,Y)\]</span></p>
<p>可以得到<span class="math inline">\(Z\)</span>的期望值与方差值分别如下</p>
<p><span class="math display">\[\overline{Z}=f(\overline{X},\overline{Y})\]</span></p>
<p>和</p>
<p><span class="math display">\[D_{Z}=f_{X}^{\prime}(\overline{X},\overline{Y})^{2}D_{X}+f_{Y}^{\prime}(\overline{X},\overline{Y})^{2}D_{Y}+2f_{X}^{\prime}(\overline{X},\overline{Y})f_{Y}^{\prime}(\overline{X},\overline{Y})D_{XY}\]</span></p>

  
  <div class="read-more-link">
    <a href="/post/2016/10/07/taylor-series-for-uncertainty/">Read More →</a>
  </div>
  
</article><article class="post">
  <h1 class="post-title">
    <a href="/post/2016/08/27/sfc-package-manual/">sfc软件包中文说明</a>
  </h1>
  <time datetime="2016-08-27T00:00:00Z" class="post-date">2016年8月27日</time>
  


<p><a href="https://cran.r-project.org/web/packages/sfc/index.html">sfc</a>软件包于2016年8月25日正式出现在<a href="https://cran.r-project.org/">CRAN</a>上，其主要功能是进行大规模物质流核算和不确定性分析。与传统物质流核算方法不同的是，sfc软件包是基于数据和模型分离的思想构建的。这种方法的优势在于能够把模型从复杂的数据结构中抽离出来，从而使研究者能够把注意力集中在模型的构建上，以避免复杂数据结构对建模过程的干扰。</p>
<div id="sfc" class="section level1">
<h1>1 安装sfc</h1>
<p>sfc软件包依赖于dplyr、tidyr、triangle、zoo、sna等R软件包，因此在R平台上安装sfc之前，最好先安装好这些依赖的软件包。sfc软件包可以用如下方式安装：</p>
<pre class="r"><code>install.packages(&quot;sfc&quot;)</code></pre>
<p>如果要安装sfc软件包的最新开发版，则可以通过以下方式：</p>
<pre class="r"><code>install.packages(&quot;devtools&quot;)
devtools::install_github(&quot;ctfysh/sfc&quot;)</code></pre>
</div>
<div id="data" class="section level1">
<h1>2 数据文件</h1>
<p>物质流核算涉及的数据的类型多且量大，同时数据存在着一定的不确定性，所以需要有一种既简单直观又易于被模型所有调用的数据格式，来管理这些数据。表1就是sfc软件包为了物质流核算所设计的一种数据文件格式，以.csv的形式存储，或者直接以数据框(data frame)的形式存在于内存中，供sfc软件包中的<code>sfc</code>函数调用。</p>

  
  <div class="read-more-link">
    <a href="/post/2016/08/27/sfc-package-manual/">Read More →</a>
  </div>
  
</article><article class="post">
  <h1 class="post-title">
    <a href="/post/2016/07/15/index-of-lorenz-curve/">与Lorenz曲线相关的指标</a>
  </h1>
  <time datetime="2016-07-15T00:00:00Z" class="post-date">2016年7月15日</time>
  


<p>在前面一篇博客“<a href="/post/2016/07/12/weighted-Gini-coeficient/">对加权Gini系数的理解</a>”中，我们已经对Lorenz曲线的构造方法进行了探讨，当时的主要目的是计算加权Gini系数。事实上，Gini系数并不能表现出Lorenz曲线的全部信息，因为同一个Gini系数可能对应不同的Lorenz曲线。为了进一步挖掘Lorenz曲线的信息，Damgaard等人<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a>提出了Lorenz不对称系数，用来说明不公平性到底是由于低收入的人群占比太高导致的，还是由于少量人群占据了大量的收入所致。另外，学者还提出了Hoover指数(或者称为Ricci-Schutz系数以及Robin Hood指数)，用来分析到底有多大比例的收入需要再分配才能实现“绝对公平”。由于Hoover指数相对比较简单，这里先探讨Hoover指数，然后再对Lorenz不对称系数进行说明。</p>
<div id="hoover" class="section level1">
<h1>1 Hoover指数</h1>
<p>Hoover指数的想法是十分简单的，假设有<span class="math inline">\(n\)</span>个人的收入分别为<span class="math inline">\(x_1,x_2,\cdots,x_n\)</span>，其平均数为<span class="math inline">\(\bar{x}\)</span>，考虑到最公平的分配方式是这<span class="math inline">\(n\)</span>个人的收入都是<span class="math inline">\(\bar{x}\)</span>，那么每个人的缺口就是<span class="math inline">\(\|x_i-\bar{x}\|\)</span>。这时我们可以计算出总的缺口占总收入的比例：</p>
<p><span class="math display">\[\text{HI}=\dfrac{\sum_{i=1}^n\|x_i-\bar{x}\|}{2\sum_{i=1}^n{x_i}}\]</span></p>
<p>这个比例就是Hoover指数。在Hoover指数的计算公式中需要除以<span class="math inline">\(2\)</span>，其原因是<span class="math inline">\(x_i-\bar{x}&lt;0\)</span>的<span class="math inline">\(\|x_i-\bar{x}\|\)</span>的总和与<span class="math inline">\(x_i-\bar{x}&gt;0\)</span>的<span class="math inline">\(\|x_i-\bar{x}\|\)</span>的总和相等，也就是说高于平均收入的人群需要拿出的收入的总和等于低于平均收入的人群需要获得的收入的总和时才能实现“绝对公平”。按照这种方式，我们很容易就能计算出“<a href="/post/2016/07/12/weighted-Gini-coeficient/">对加权Gini系数的理解</a>”中第一个表格中数据的Hoover指数，其结果为
<span class="math inline">\(0.206\)</span>。</p>

  
  <div class="read-more-link">
    <a href="/post/2016/07/15/index-of-lorenz-curve/">Read More →</a>
  </div>
  
</article>

    <ul class="pagination pagination-default">
      <li class="page-item">
        <a href="/" aria-label="First" class="page-link" role="button"><span aria-hidden="true">&laquo;&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/page/2/" aria-label="Previous" class="page-link" role="button"><span aria-hidden="true">&laquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/" aria-label="Page 1" class="page-link" role="button">1</a>
      </li>
      <li class="page-item">
        <a href="/page/2/" aria-label="Page 2" class="page-link" role="button">2</a>
      </li>
      <li class="page-item active">
        <a href="#" aria-current="page" aria-label="Page 3" class="page-link" role="button">3</a>
      </li>
      <li class="page-item">
        <a href="/page/4/" aria-label="Page 4" class="page-link" role="button">4</a>
      </li>
      <li class="page-item">
        <a href="/page/4/" aria-label="Next" class="page-link" role="button"><span aria-hidden="true">&raquo;</span></a>
      </li>
      <li class="page-item">
        <a href="/page/4/" aria-label="Last" class="page-link" role="button"><span aria-hidden="true">&raquo;&raquo;</span></a>
      </li>
    </ul>
</div>
    </main>
<script src="/js/math-code.js"></script>
<script async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    
  </body>
</html>
